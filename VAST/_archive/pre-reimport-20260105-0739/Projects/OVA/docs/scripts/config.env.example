#===============================================================================
# VAST 5.4 Installation Configuration
#===============================================================================
# Copy this file to config.env and customize for your environment
# All values can be overridden via environment variables
#===============================================================================

#-------------------------------------------------------------------------------
# Cluster Settings
#-------------------------------------------------------------------------------

# Cluster name (will appear in VMS UI)
CLUSTER_NAME="lb-vast54"

# VAST build version (from tarball name)
VAST_BUILD="release-5-4-0-2043819"

# Admin credentials (change password after installation!)
VAST_ADMIN_USER="admin"
VAST_ADMIN_PASS="123456"

#-------------------------------------------------------------------------------
# Network Settings
#-------------------------------------------------------------------------------

# Management IP (leave empty for auto-detect from first non-loopback interface)
MANAGEMENT_IP=""

# Management interface name
MANAGEMENT_IFACE="eth0"

# VIP pool settings (internal loopback IPs)
VIP_START="15.0.0.1"
VIP_END="15.0.0.8"
VIP_SUBNET=24

# Replication gateway (internal)
GATEWAY_START="18.18.0.1"
GATEWAY_END="18.18.0.2"
GATEWAY_SUBNET=24

#-------------------------------------------------------------------------------
# Storage Settings
#-------------------------------------------------------------------------------

# VAST installation directory (binaries, containers, config on OS disk)
VAST_MOUNT="/vast"

# VAST virtual drives directory (SSD/NVRAM files on NVMe)
# This should be mounted on your NVMe passthrough device(s)
VAST_DRIVES="/vast/drives"

# Location of VAST tarball (if not in /vast/bundles)
VAST_TARBALL=""

# Data disk (optional - for separate OS/data disks)
# Leave empty if using single disk
DATA_DISK=""

#-------------------------------------------------------------------------------
# Resource Validation
#-------------------------------------------------------------------------------

# Minimum resources required (script will abort if not met)
MIN_RAM_GB=110
MIN_DISK_GB=100
MIN_CPU=10

# Maximum vCPU to physical core ratio (1 = no overcommit, recommended)
MAX_VCPU_RATIO=1

#-------------------------------------------------------------------------------
# Timeouts (seconds)
#-------------------------------------------------------------------------------

# How long to wait for bootstrap to complete
BOOTSTRAP_TIMEOUT=1800    # 30 minutes

# How long to wait for cluster creation
CLUSTER_TIMEOUT=1200      # 20 minutes

# How long to wait for cluster to go ONLINE
ACTIVATION_TIMEOUT=900    # 15 minutes

# Interval between status checks
CHECK_INTERVAL=10

#-------------------------------------------------------------------------------
# Logging
#-------------------------------------------------------------------------------

# Where to store logs
LOG_DIR="/home/centos/docs/install_logs"

# Verbosity: 0=quiet, 1=normal, 2=debug
VERBOSE=1

# Keep monitoring logs after installation
KEEP_MONITOR_LOGS=1

#-------------------------------------------------------------------------------
# Features
#-------------------------------------------------------------------------------

# Apply all known workarounds (recommended)
APPLY_WORKAROUNDS=1

# Pre-install monitor_v2 to prevent race condition
PREINSTALL_MONITOR=1

# Copy rsync to containers after start
COPY_RSYNC=1

# Run monitoring during installation
MONITOR_DURING_INSTALL=1

# Create snapshot after successful installation (requires qm access)
CREATE_SNAPSHOT=0
SNAPSHOT_NAME="vast-installed"

# Abort on first error (recommended)
ABORT_ON_ERROR=1

#-------------------------------------------------------------------------------
# Advanced Settings (rarely need to change)
#-------------------------------------------------------------------------------

# SSH user for VAST operations
VAST_USER="centos"

# SSH key location
SSH_KEY="/vast/deploy/ssh_key.pem"

# Docker registry
DOCKER_REGISTRY="vastdata.registry.local:5000"

# Loopback base IP
LOOPBACK_IP="11.0.0.1"

# Container port assignments
CNODE1_PORT=4100
CNODE2_PORT=4200
DNODE1_PORT=4300
DNODE2_PORT=4400

#===============================================================================
# End of configuration
#===============================================================================
